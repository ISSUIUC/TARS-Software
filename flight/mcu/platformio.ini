; PlatformIO Project Configuration File
;
; Illinois Space Society - Avionics Team
;
; Authors:
;   Ayberk Yaraneri
;
; PlatformIO Documentation:
; https://docs.platformio.org/page/projectconf.html


; #############################################################################
; Common settings for all environments
[common]
src_dir = ${workspacedir}
default_src_filter = 
  +<*> 
  -<.git/> 
  -<.svn/> 
  -<example/> 
  -<examples/> 
  -<test/> 
  -<tests/> 
  -<test_target/>
  -<test_local/>


; #############################################################################
; Local execution environment, for running unit test suite on host machine 
; (i.e. on Desktop/Laptop PC or Jetson Nano) 
;[env:desktop]
;platform = native
;lib_compat_mode = off
;lib_deps =
;  googletest
;build_flags =
;  -pthread
;  -std=c++17 
;src_filter = -<mcu_hybrid/> -<mcu_ac/>
;test_ignore = test_target
;lib_ldf_mode = chain+


; #############################################################################
; Active Control MCU Build Environment 
[env:mcu_ac]
platform = teensy
board = teensy41
framework = arduino
upload_protocol = teensy-cli
extra_scripts = extra_script.py
; turn off all the warnings from eigen
build_flags = -Wno-deprecated-declarations
;test_port = COM5

lib_deps =
	PaulStoffregen/PWMServo

src_filter = -<mcu_hybrid/> +<mcu_ac/> 
test_ignore = test_local 
lib_ldf_mode = chain+

;uncomment this to compile on jetson nano:
;platform_packages =
;   toolchain-gccarmnoneeabi@https://bintray.com/platformio/tool-packages/download_file?file_path=5966cc5-toolchain-gccarmnoneeabi-linux_aarch64-1.90301.200702.tar.gz
;   tool-teensy@https://github.com/maxgerhardt/pio-tool-teensy-arm/archive/master.zip


; #############################################################################
; Hybrid Engine Control MCU Build Environment 
[env:mcu_hybrid]
platform = teensy
board = teensy41
framework = arduino
upload_protocol = teensy-cli

lib_deps =
	PaulStoffregen/PWMServo

src_filter = -<mcu_ac/> +<mcu_hybrid/>
test_ignore = test_local
lib_ldf_mode = chain+

;uncomment this to compile on jetson nano:
;platform_packages =
;   toolchain-gccarmnoneeabi@https://bintray.com/platformio/tool-packages/download_file?file_path=5966cc5-toolchain-gccarmnoneeabi-linux_aarch64-1.90301.200702.tar.gz
;   tool-teensy@https://github.com/maxgerhardt/pio-tool-teensy-arm/archive/master.zip
